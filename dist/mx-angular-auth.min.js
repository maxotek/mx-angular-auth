!function(){!function(){"use strict";angular.module("mx-angular-auth",["mx-angular-api","ngStorage"])}(),function(){function n(n,e,t,r,o){function a(n,a,u){var c=function(n){r.setJwt(n.data),t.onLogin(),a(n)},s=function(n){u(n)},l={username:n.username,password:n.password};Object.toparams=function(n){var e=[];for(var t in n)e.push(t+"="+encodeURIComponent(n[t]));return e.join("&")};var i={method:"post",url:e.tokenUrl,data:Object.toparams(l),headers:{"Content-Type":"application/x-www-form-urlencoded"}};o(i).then(c,s)}function u(){r.currentUser=null,r.setJwt(null),t.onLogout()}return{login:a,logout:u}}angular.module("mx-angular-auth").factory("mxngAccountService",n),n.$inject=["$location","Constants","$rootScope","mxngUserService","$http"]}(),function(){function n(n,e){function t(n){var e=null;null!=n&&(e=jwt_decode(n)["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]),c.currentUser=e,c.accessToken=n,c.saveState()}function r(){e.user=angular.toJson(c.currentUser),e.accessToken=angular.toJson(c.accessToken)}function o(){c.currentUser=angular.fromJson(e.user),c.accessToken=angular.fromJson(e.accessToken)}function a(){return c.restoreState(),c.currentUser}function u(){return c.restoreState(),c.accessToken}var c={currentUser:null,accessToken:null,setJwt:t,saveState:r,restoreState:o,getCurrentUser:a,getAccessToken:u};return c}angular.module("mx-angular-auth").factory("mxngUserService",n),n.$inject=["$rootScope","$localStorage"]}()}();